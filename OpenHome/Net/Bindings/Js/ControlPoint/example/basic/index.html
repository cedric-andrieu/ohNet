<!-- ohNet Basic Example -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Basic ohNet Example</title>
    
    <!-- Required ohNet js files.  You may wish to minify and combine these into one file. -->
    <script src="js/ohnet/ohnet.util.js" type="text/javascript"></script>
    <script src="js/ohnet/ohnet.base64.js" type="text/javascript"></script>
    <script src="js/ohnet/ohnet.subscriptionmanager.js" type="text/javascript"></script>
    <script src="js/ohnet/ohnet.serviceproperty.js" type="text/javascript"></script>
    <script src="js/ohnet/ohnet.soaprequest.js" type="text/javascript"></script>
    <script src="js/ohnet/ohnet.websocket.js" type="text/javascript"></script>
    <script src="js/ohnet/ohnet.longpolling.js" type="text/javascript"></script>
    
    <!-- Required ohNet autogenerated js proxy file. Allows events to be delivered via Long Polling if web sockets are not supported. -->
    <script src="js/proxy/CpOpenhomeOrgSubscriptionLongPoll1.js" type="text/javascript"></script>
    
    <!-- ohNet autogenerated js proxy file.  Exposes actions and events for the service you wish to communicate with.  In this case, it's TestBasic.--> 
    <script src="js/proxy/CpOpenhomeOrgTestBasic1.js" type="text/javascript"></script>
    
    <!-- ohNet.Js requires a running subscriptionmanager before it can receive events from services -->
    <script type="text/javascript">
        // The device udn.
        var nodeUdn = 'device-ohNetTestBasic';
        
        // The websocket Port.
        var webSocketPort = 55555;
        
        function pageLoad() {
                // Start the Subscription Manager with default settings.
               ohnet.subscriptionmanager.start(
           		{
           			startedFunction: function () {
                        // Once the subscription manager has successfully started, you may subscribe your proxies.  Subscribing will allow events to be received.
                        
                        // Create a TestBasic Proxy
                		var proxy = new CpProxyOpenhomeOrgTestBasic1("device-ohNetTestBasic");
                        
                        // Call the SetInt action
                        // Parameters for SetInt are (int, onSuccessFunction, onErrorFunction)
                        
                        proxy.SetInt(10);
                        document.getElementById('results').innerHTML += '<p>Action sent:  Setting Int to 10</p>';
                        
                        // Setup the event callback for VarInt_Changed
                        // This callback function will fire whenever the Int property has changed.
                        proxy.VarInt_Changed(function(state) {
                            // Do something whenever the property Int has changed
                            document.getElementById('results').innerHTML += '<p>Event received:  Int is now '+state+'</p>';
                        });
                        
                        
                        // Start the proxy subscription to begin listening for events
                        // On subscription, the initial property values are evented automatically
                        proxy.subscribe();
                   
                   	},
                });	
        }
                 
      
    </script>
</head>
<body onload="pageLoad()">
<div id="results">
</div>
</body>
</html>
